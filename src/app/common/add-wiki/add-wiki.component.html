<label class="subtitle1  w-25" *ngIf="context">Context </label>
<label *ngIf="matchingInstructions"><a (click)="contextLink()" class="greyish-black subtitle1 text-underline">Context</a> > <a href="#" class="ml-3 greyish-black subtitle1">Matching Instruction(s)</a> </label>
<label *ngIf="textEditor"><a (click)="contextLink()" class="greyish-black subtitle1 text-underline">Context </a> > <a (click)="matchingInstructLink()" *ngIf="similarInstrLabel" class="ml-3 greyish-black subtitle1 text-underline">Matching Instruction(s) > </a><a href="#" class="ml-3 greyish-black subtitle1">Text Editor</a> </label>
<div class="create-wiki-box grey-border mb-2">
  <p class="yellow-font grey-bottom-border m-0">Create Wiki</p>
  <form [formGroup]="wikiContextForm">
    <div class="d-flex justify-content-between align-items-center p-2">
      <label class="greyish-black subtitle1 mb-0">Title</label>
      <input class="w-75 ml-5 p-2 grey-border br-rd-5px" type="text" placeholder="Enter Text" formControlName="wikiTitle">
    </div>
    <div class="context" *ngIf="context">
      <mat-accordion class="wiki-accord">
        <mat-expansion-panel class="grey-bg grey-bottom-border overflow-show" [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <label class="font-bold m-0 cust-arrow-icon">Work Center</label>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div [hidden]="hidden">
            <div class="d-flex justify-content-between align-items-center p-3">
              <label *ngIf="label !== ''" [class]="labelClass">Location </label>
              <ng-multiselect-dropdown [placeholder]="'-Select-'" formControlName="wikiLocation"  [(ngModel)]="selectedLocation" [settings]="getSettings('LOCATION_NAME', 'LOCATION_ID')" [data]="locationData" class="w-75" disabled="true">
              </ng-multiselect-dropdown>
            </div>
            <div class="d-flex justify-content-between align-items-center p-3">
              <label *ngIf="label !== ''" [class]="labelClass">Client </label>
              <ng-multiselect-dropdown [placeholder]="'-Select-'" formControlName="wikiClient" disabled="false" [(ngModel)]="selectedClient" [settings]="getSettings('CLIENT_NAME','CLIENT_ID')" [data]="clientData" class="w-75">
              </ng-multiselect-dropdown>
            </div>
            <div class="d-flex justify-content-between align-items-center p-3">
              <label *ngIf="label !== ''" [class]="labelClass">Contract </label>
              <ng-multiselect-dropdown [placeholder]="'-Select-'" formControlName="wikiContract" disabled="false" [(ngModel)]="selectedContract" [settings]="getSettings('CONTRACT_NAME','CONTRACT_ID')" [data]="contractData" class="w-75">
              </ng-multiselect-dropdown>
            </div>
            <div class="d-flex justify-content-between align-items-center p-3">
              <label *ngIf="label !== ''" [class]="labelClass">Work Center </label>
              <ng-multiselect-dropdown [placeholder]="'-Select-'" formControlName="wikiWorkCenter" disabled="false" [(ngModel)]="workCenterData" [settings]="getSettings(workCenterDisplayKey)" [data]="workCenterData" class="w-75">
              </ng-multiselect-dropdown>
            </div>
          </div>
        </mat-expansion-panel>
        <mat-expansion-panel class="grey-bg grey-bottom-border overflow-show" [expanded]="step === 1" (opened)="setStep(1)" hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <label class="font-bold m-0 cust-arrow-icon">Unit Details</label>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div [hidden]="hidden">
            <div class="d-flex justify-content-between align-items-center p-3">
              <label *ngIf="label !== ''" [class]="labelClass">Family </label>
              <ng-multiselect-dropdown [placeholder]="'-Select-'" formControlName="wikiFamily" [settings]="multiSelectSettings('name', 'name')" (onSelect)="onUnitDetailsChange($event)" [disabled]="familyDisableState" [data]="unitFamilyData" class="w-75">
              </ng-multiselect-dropdown>
            </div>
            <div class="d-flex justify-content-between align-items-center p-3">
              <label *ngIf="label !== ''" [class]="labelClass">Platform </label>
              <ng-multiselect-dropdown [placeholder]="'-Select-'" formControlName="wikiPlatform" [settings]="multiSelectSettings('name', 'name')" (onSelect)="onUnitDetailsChange($event)" [disabled]="platformDisableState" [data]="unitPlatformData" class="w-75">
              </ng-multiselect-dropdown>
            </div>
            <div class="d-flex justify-content-between align-items-center p-3">
              <label *ngIf="label !== ''" [class]="labelClass">Model Name/PN </label>
              <ng-multiselect-dropdown [placeholder]="'-Select-'"  (onSelect)="onUnitDetailsChange($event)" formControlName="wikiModelNumber" [settings]="multiSelectSettings('name', 'name')" [disabled]="modelNameDisableState" [data]="unitModelNameData" class="w-75">
              </ng-multiselect-dropdown>
            </div>
            <div class="d-flex justify-content-between align-items-center p-3">
              <label *ngIf="label !== ''" [class]="labelClass">Commodity </label>
              <ng-multiselect-dropdown [placeholder]="'-Select-'" formControlName="wikiCommodity" [settings]="multiSelectSettings('name', 'name')" (onSelect)="onUnitDetailsChange($event)" [disabled]="commodityDisableState" [data]="unitCommodityData" class="w-75">
              </ng-multiselect-dropdown>
            </div>
          </div>
        </mat-expansion-panel>
        <mat-expansion-panel class="grey-bg grey-bottom-border overflow-show" [expanded]="step === 2" (opened)="setStep(2)" hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <label class="font-bold m-0 cust-arrow-icon">Defect</label>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div [hidden]="hidden">
            <div class="d-flex justify-content-between align-items-center p-3">
              <label *ngIf="label !== ''" [class]="labelClass">Defect Level</label>
              <ng-multiselect-dropdown [placeholder]="'-Select-'" formControlName="defectLevelData" [settings]="multiSelectSettings('description', 'name')" [data]="defectCodeData" class="w-75">
              </ng-multiselect-dropdown>
            </div>
            <div class="d-flex justify-content-between align-items-center p-3">
              <label *ngIf="label !== ''" [class]="labelClass">Defect Level 2 </label>
              <ng-multiselect-dropdown [placeholder]="'-Select-'" formControlName="defectLevelData2" [settings]="multiSelectSettings('description', 'name')" [data]="defectCodeData2" class="w-75">
              </ng-multiselect-dropdown>
            </div>
            <div class="d-flex justify-content-between align-items-center p-3">
              <label *ngIf="label !== ''" [class]="labelClass">Defect Level 3 </label>
              <ng-multiselect-dropdown [placeholder]="'-Select-'" formControlName="defectLevelData3" [settings]="multiSelectSettings('description', 'name')" [data]="defectCodeData3" class="w-75">
              </ng-multiselect-dropdown>
            </div>
          </div>
        </mat-expansion-panel>
        <mat-action-row class="border-0">
          <button type="button" class="btn btn-light mr-2" (click)="cancel()">Cancel</button>
          <button type="button" class="btn btn-outline-dark mr-2" (click)="saveDraft()">Save Draft</button>
          <button type="button" class="btn btn-primary" [disabled]="wikiContextForm.invalid || unitDeailsMandatoryCheck() || defectMandatoryCheck()" (click)="contextNext()">Next</button>
        </mat-action-row>
      </mat-accordion>
    </div>
  </form>
  <div class="matching-instructions p-2" *ngIf="matchingInstructions">
    <div class="instructions-alert d-flex align-items-center error-block p-2">
      <label class="subtitle1 mb-0">
        <mat-icon matSuffix class="error-status"><i class="fa fa-exclamation-circle" aria-hidden="true"></i></mat-icon>
      </label>
      <label class="ml-3 mb-0">MATCHING INSTRUCTION(S) FOUND</label>
    </div>
    <p class="pt-3 body-italic">Based on the context of this repair tip we have found (<span>{{duplicateWikisList.length}}</span>) similar repair tips. Please confirm that this tip is unique to those flagged</p>
    <div class="d-flex justify-content-between align-items-center">
      <label class="subtitle1">Context </label>
      <label class="w-75 heading3-regular"><span *ngIf="selectedLocation">{{selectedLocation}} > </span><span *ngIf="selectedClient">{{selectedClient}} > </span><span *ngIf="selectedContract">{{selectedContract}} > </span><span *ngIf="workCenterData[0].WORKCENTER">{{workCenterData[0].WORKCENTER}} > </span><span *ngIf="breadCrumbData.family">{{breadCrumbData.family}} > </span><span *ngIf="breadCrumbData.platform">{{breadCrumbData.platform}} > </span><span *ngIf="breadCrumbData.modelPart">{{breadCrumbData.modelPart}} > </span><span *ngIf="breadCrumbData.commodity">{{breadCrumbData.commodity}} > </span><span *ngIf="breadCrumbData.defect">{{breadCrumbData.defect}}</span></label>
    </div>
    <section class="example-section">
      <mat-checkbox
          class="example-margin"
          [(indeterminate)]="indeterminate"
          [labelPosition]="labelPosition"
          [disabled]="disabled" (change)="changeCheck($event)">
          I have read the bellow instructions and confirm my instruction is unique.
      </mat-checkbox>
    </section>
    <mat-action-row class="border-0">
      <button type="button" class="btn btn-light mr-2" (click)="cancel()">Cancel</button>
        <button type="button" class="btn btn-primary" [disabled]="confirm" (click)="matchingNext()">Next</button>
    </mat-action-row>
    <div class="Similar-instructions" *ngIf="duplicateWikisList.length">
      <app-wiki-list isHideAddWiki="true" [wikisList]="duplicateWikisList"></app-wiki-list>
    </div>
  </div>
  <form [formGroup]="wikiTextEditorForm">
    <div class="text-editor" *ngIf="textEditor">
      <div class="d-flex justify-content-between align-items-center p-2">
        <label class="subtitle1">Context </label>
        <label class="w-75 heading3-regular"><span *ngIf="selectedLocation">{{selectedLocation}}</span> > <span *ngIf="selectedClient">{{selectedClient}} > </span><span *ngIf="selectedContract">{{selectedContract}} > </span><span *ngIf="workCenterData[0].WORKCENTER">{{workCenterData[0].WORKCENTER}} > </span><span *ngIf="breadCrumbData.family">{{breadCrumbData.family}} > </span><span *ngIf="breadCrumbData.platform">{{breadCrumbData.platform}} > </span><span *ngIf="breadCrumbData.modelPart">{{breadCrumbData.modelPart}} > </span><span *ngIf="breadCrumbData.commodity">{{breadCrumbData.commodity}} > </span><span *ngIf="breadCrumbData.defect">{{breadCrumbData.defect}}</span></label>
      </div>
      <div class="d-flex align-items-center p-3">
        <label *ngIf="label !== ''" class="w-25">Load From</label>
        <ng-multiselect-dropdown [placeholder]="'-Select-'" formControlName="loadFromData" [settings]="aboutGetSettings('value', 'viewValue')" [data]="loadFromData" class="w-75">
        </ng-multiselect-dropdown>
      </div>
      <app-wiki-richtext [htmlContent]="htmlContent" #tinyEditorData></app-wiki-richtext>
      <mat-accordion class="wiki-accord">
        <mat-expansion-panel class="grey-bg grey-bottom-border overflow-show" [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <label class="font-bold m-0 cust-arrow-icon">About</label>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div [hidden]="hidden">
            <div class="d-flex align-items-center p-3">
              <label *ngIf="label !== ''" class="w-25">Author </label>
              <label *ngIf="loginUserName" >{{loginUserName}}</label>
            </div>
            <div class="d-flex align-items-center p-3">
              <label *ngIf="label !== ''" class="w-25">Level of Experience </label>
              <label *ngIf="expLevel[0].employee_level" >{{expLevel[0].employee_level}}</label>
              <label *ngIf="!expLevel[0].employee_level" > - </label>
            </div>
            <div class="d-flex align-items-center p-3">
              <label *ngIf="label !== ''" class="w-25">Type of Instruction</label>
              <ng-multiselect-dropdown [placeholder]="'-Select-'" formControlName="typeOfInstData" [settings]="aboutGetSettings('value', 'viewValue')" [data]="typeOfInstData" class="w-75 ml-2" (onSelect)="typeInstrSelect()" (onDeSelect)="typeInstrDeSelect()">
              </ng-multiselect-dropdown>
              <mat-icon class="cellGlassIcons" *ngIf="!instrSelected">hourglass_empty</mat-icon>
              <mat-icon class="wiki-check-circle" *ngIf="instrSelected" >check_circle</mat-icon>
            </div>
            <div class="d-flex align-items-center p-3">
              <label *ngIf="label !== ''" class="w-25">Instruction Language </label>
              <ng-multiselect-dropdown [placeholder]="'-Select-'" formControlName="instrLangData" [settings]="aboutGetSettings('value', 'viewValue')" [data]="instrLangData" class="w-75 ml-2" (onSelect)="langSelect()" (onDeSelect)="langDeSelect()">
              </ng-multiselect-dropdown>
              <mat-icon class="cellGlassIcons" *ngIf="!langSelected">hourglass_empty</mat-icon>
              <mat-icon class="wiki-check-circle" *ngIf="langSelected" >check_circle</mat-icon>
            </div>
            <div class="d-flex align-items-center p-3">
              <label *ngIf="label !== ''" class="w-25">Timestamp </label>
              <label>{{wikiDateTime}}</label>
            </div>
          </div>
        </mat-expansion-panel>
        <mat-action-row class="border-0">
          <button type="button" class="btn btn-light mr-2" (click)="cancel()">Cancel</button>
          <button type="button" class="btn btn-outline-dark mr-2" (click)="saveDraft()">Save Draft</button>
          <button type="button" class="btn btn-primary"  [disabled]="wikiTextEditorForm.invalid || wikiContextForm.controls.wikiTitle.invalid || myChild.wikiTinyEditorForm.invalid" (click)="saveData()">Submit</button>
        </mat-action-row>
      </mat-accordion>
    </div>
  </form>
</div>